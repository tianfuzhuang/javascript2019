<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        #contain {
            width: 400px;
            height: 400px;
            border: 1px solid yellowgreen;
            border-radius: 20px;
            margin: 20px auto;
            padding: 60px 30px 30px 30px;
            box-sizing: border-box;
        }

        #contain div {
            margin-bottom: 30px;
        }

        #contain div span {
            font-size: 20px;
            color: #555;
            width: 80px;
            display: inline-block;
        }

        #contain div input {
            width: 200px;
            height: 30px;
            outline: none;
            padding-left: 20px;
            font-size: 16px;
            border-radius: 5px;
            border: 1px solid yellowgreen;
        }

        #btn {
            display: block;
            outline: none;
            width: 100px;
            height: 40px;
            border: 1px solid yellowgreen;
            background-color: #fff;
            border-radius: 10px;
            font-size: 20px;
            margin: 20px auto;
            cursor: no-drop;
            _cursor: pointer;
            color: #555;

        }

        #contain .ok {
            border-color: yellowgreen;
        }

        #contain .error {
            border-color: red;
        }
    </style>
</head>

<body>
    <div id="contain">
        <div id="qq">
            <span>QQ：</span>
            <input type="text" data-name="qq" placeholder="请输入QQ">
        </div>
        <div id="email">
            <span>Email：</span>
            <input type="text" data-name="email" placeholder="请输入邮箱">
        </div>
        <div id="mobile">
            <span>Mobile：</span>
            <input type="text" data-name="phone" placeholder="请输入手机号码">
        </div>
        <div id="date">
            <span>Date：</span>
            <input type="text" data-name="birth" placeholder="请输入生日">
        </div>

        <p><input type="submit" value="注册" id="btn"></p>

    </div>
    <script>
        class Mytext {
            constructor() {
                this.txts = document.querySelectorAll('input[type="text"]');
                this.qqReg = /^[1-9]\d{4,10}$/;
                this.emailReg = /^[a-zA-z]\w{5,11}@[1-9a-z]{2,10}(\.c(om|n)){1,2}$/;
                this.phoneReg = /^1[3-9]\d{9}$/;
                this.birthReg = /^(\d+)\D+(\d+)\D+(\d+)\D?$/;
                this.input1 = this.txts[0];
                this.input2 = this.txts[1];
                this.input3 = this.txts[2];
                this.input4 = this.txts[3];
                this.ary = [false, false, false, false,];
            }

            Textqq() {
                let _that = this;
                this.input1.oninput = function () {
                    if (_that.qqReg.test(this.value)) {
                        this.className = 'ok';
                        _that.ary[0] = true;
                    } else {
                        this.className = 'error';
                        _that.ary[0] = false;
                    }
                }
            }
            Textemail() {
                let _that = this;
                this.input2.oninput = function () {
                    if (_that.emailReg.test(this.value)) {
                        this.className = 'ok';
                        _that.ary[1] = true;
                    } else {
                        this.className = 'error';
                        _that.ary[1] = false;
                    }
                }
            }


            Textphone() {
                let _that = this;
                this.input3.oninput = function () {
                    if (_that.phoneReg.test(this.value)) {
                        this.className = 'ok';
                        _that.ary[2] = true;
                    } else {
                        this.className = 'error';
                        _that.ary[2] = false;
                    }
                }
            }

            Textbrith() {
                let _that = this;
                this.input4.oninput = function () {
                    if (_that.birthReg.test(this.value)) {

                        if (_that.Brith(this.value)) {
                            this.className = 'ok';
                            _that.ary[3] = true;
                        }else{
                            this.className = 'error';
                            _that.ary[3] = false;
                        }
                    } else {
                        this.className = 'error';
                    }
                    btn.style.cursor = _that.ary.every(b=>b)?'pointer':'no-drop';
                    console.log(_that.ary);
                    
                    
                }
             console.log(aa.ary);
            }
            Brith(val) {
                let d = new Date();
                let ary1 = val.match(/\d+/g);
                console.log(ary1);         
                let d2 =new Date( ary1.join(' '));
                console.log(d2);   
                if ((d - d2 )> 0) {
                    let year = '' + d2.getFullYear();
                    let month = '' + (d2.getMonth() + 1);
                    let date = '' + d2.getDate();
                    if (year === ary1[0] && month === ary1[1] && date === ary1[2]) {
                        return true
                    } else {
                        return false
                    }
                } else {
                    return false
                }

            }

            


        }
        let aa = new Mytext();
        aa.Textqq();
        aa.Textemail();
        aa.Textphone()
        aa.Textbrith()
    </script>
</body>

</html>