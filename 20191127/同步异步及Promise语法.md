## 同步异步
### JS为何是单线程的
> avaScript的单线程，与它的用途有关。作为浏览器脚本语言，JavaScript的主要用途是与用户互动，以及操作DOM。这决定了它只能是单线程，否则会带来很复杂的同步问题。比如，假定JavaScript同时有两个线程，一个线程在某个DOM节点上添加内容，另一个线程删除了这个节点，这时浏览器应该以哪个线程为准？
所以，为了避免复杂性，从一诞生，JavaScript就是单线程，这已经成这门语言的核心特征，将来也不会改变。
所谓单线程，是指在JS引擎中负责解释和执行JavaScript代码的线程只有一个。
### 同步
> 代码从上往下依次执行，如果一个地方卡住了，下面的代码就不执行了
### 异步
> 虽然从上往下依次执行，如果一个地方卡住了，是不会阻止代码向下执行的
(promise 定时器 所有的事件)
### 事件循环
  + js先执行主线程的代码，如果主线程有异步代码，比如定时器，promise或者事件那么会把异步代码放到异步队列中存储，当异步代码的条件成立的时候，把异步代码压入到主线程中执行，压入的方式是如果有微任务就先执行微任务，执行完微任务再执行宏任务，当主线程空间的时候执行压入的代码，执行完之后再从异步队列中压入异步代码到主线程中，这个过程叫事件循环。*** 注意的是执行完微任务是第一层的,如果在宏任务中开个微任务，那么先执行宏任务，再执行宏任务中的微任务
### 异步操作的缺点
   + 异步的操作是不容易进行维护开发的，同步操作才利于维护开发（上面的代码执行完才会执行下面的，有序的）
### promise是嘎哈的(英文:承诺)
>  promise是解决异步编程顺序问题的（也就是说，让异步的代码同步执行）在then里面就走同步

### promise有三个状态：
1、pending[待定]初始状态
2、fulfilled[实现]操作成功
3、rejected[被否决]操作失败
+ 当promise状态发生改变，就会触发then()里   的响应函数处理后续步骤；
  promise状态一经改变，不会再变。
  Promise对象的状态改变，只有两种可能：
  从pending变为resolved
  从pending变为rejected。
  这两种情况只要发生，状态就凝固了，不会再变了。
#### .then语法
>.then()
1、接收两个函数作为参数，分别代表fulfilled（成功）和rejected（失败）
2、.then()返回一个新的Promise实例，所以它可以链式调用
3、当前面的Promise状态改变时，.then()根据其最终状态，选择特定的状态响应函数执行
4、状态响应函数可以返回新的promise，或其他值，不返回值也可以我们可以认为它返回了一个null；
5、如果返回新的promise，那么下一级.then()会在新的promise状态改变之后执行
6、如果返回其他任何值，则会立即执行下一级.then()

.then()里面有.then()的情况
1、因为.then()返回的还是Promise实例
2、会等里面的then()执行完，再执行外面的
*** then(成功函数,失败函数)
    第一个then  （微任务）
        成功函数里面的参数就是异步的结果
        第二个then （微任务）
        第一个then的返回值
*** 如果当前PROMISE实力状态确定了以后,都会到对应的then中找方法 如果then中没有对应的方法,会往下继续顺延

+ finally：不管成功还是失败都会进的回调函数
        
        如果代码有可能会报错，下面的代码是不会执行的，如果使用try，catch
        那么try中的代码报错会进catch，报错是不会影响后面代码执行的
        try{     
        }catch(e){
        }
### Promise.all() 
批量执行
Promise.all([p1, p2, p3])用于将多个promise实例，包装成一个新的Promise实例，返回的实例就是普通的promise
它接收一个数组作为参数
数组里可以是Promise对象，也可以是别的值，只有Promise会等待状态改变
当所有的子Promise都完成，该Promise完成，返回值是全部值得数组
有任何一个失败，该Promise失败，返回值是第一个失败的子Promise结果

### Promise.race() 
类似于Promise.all() ，区别在于它有任意一个完成就算完成
### catch的用法
与Promise对象方法then方法并行的一个方法就是catch,与try  catch类似，catch就是用来捕获异常的，也就是和then方法中接受的第二参数rejected的回调是一样的